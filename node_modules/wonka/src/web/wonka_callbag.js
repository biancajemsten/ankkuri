

import * as Block from "bs-platform/lib/es6/block.js";
import * as Curry from "bs-platform/lib/es6/curry.js";

function fromCallbag(callbag) {
  return (function (sink) {
      var wrappedSink = function (signal, data) {
        switch (signal) {
          case 0 : 
              var wrappedTalkback = function (talkbackSignal) {
                if (talkbackSignal) {
                  return data(/* CALLBAG_END */2);
                } else {
                  return data(/* CALLBAG_DATA */1);
                }
              };
              return sink(/* Start */Block.__(0, [wrappedTalkback]));
          case 1 : 
              return sink(/* Push */Block.__(1, [data]));
          case 2 : 
              return sink(/* End */0);
          
        }
      };
      return callbag(/* CALLBAG_START */0, wrappedSink);
    });
}

function toCallbag(source) {
  return (function (signal, data) {
      if (signal === /* CALLBAG_START */0) {
        return Curry._1(source, (function (signal) {
                      if (typeof signal === "number") {
                        return data(/* CALLBAG_END */2, /* () */0);
                      } else if (signal.tag) {
                        return data(/* CALLBAG_DATA */1, signal[0]);
                      } else {
                        var talkbackFn = signal[0];
                        var wrappedTalkbackFn = function (talkback) {
                          switch (talkback) {
                            case 0 : 
                                return /* () */0;
                            case 1 : 
                                return talkbackFn(/* Pull */0);
                            case 2 : 
                                return talkbackFn(/* Close */1);
                            
                          }
                        };
                        return data(/* CALLBAG_START */0, wrappedTalkbackFn);
                      }
                    }));
      } else {
        return 0;
      }
    });
}

export {
  fromCallbag ,
  toCallbag ,
  
}
/* No side effect */
