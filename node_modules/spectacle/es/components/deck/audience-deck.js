import React from 'react';
import PropTypes from 'prop-types';
import { DeckContext } from '../../hooks/use-deck';
import { MSG_SLIDE_STATE_CHANGE } from '../../hooks/use-presentation';

var AudienceDeck = function AudienceDeck(props) {
  var addMessageHandler = props.addMessageHandler;

  var _React$useContext = React.useContext(DeckContext),
      dispatch = _React$useContext.dispatch;

  var onMessageReceived = React.useCallback(function (message) {
    // The PresentationDeck will send messages to
    // keep the AudienceDeck in sync.
    if (message.type === MSG_SLIDE_STATE_CHANGE) {
      dispatch({
        type: 'GO_TO_SLIDE',
        payload: message.payload
      });
    }
  }, [dispatch]);
  React.useEffect(function () {
    addMessageHandler(onMessageReceived);
  }, [addMessageHandler, onMessageReceived]);
  return React.createElement(React.Fragment, null, props.children);
};

AudienceDeck.propTypes = {
  addMessageHandler: PropTypes.func.isRequired,
  children: PropTypes.node.isRequired
};
export default AudienceDeck;